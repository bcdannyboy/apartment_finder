FROM debian:12.5-slim

RUN apt-get update \
    && apt-get install -y --no-install-recommends squid ca-certificates \
    && rm -rf /var/lib/apt/lists/*

COPY squid.conf /etc/squid/squid.conf
COPY allowed_domains.txt /etc/squid/allowed_domains.txt

EXPOSE 3128

CMD ["squid", "-N", "-f", "/etc/squid/squid.conf"]
